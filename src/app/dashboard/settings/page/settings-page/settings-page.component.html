<app-header></app-header>

<div class="settings-page">
  <div class="settings-page__container">
    <div class="settings-page__header">
      <h1 class="settings-page__title">Param√®tres</h1>
    </div>

    <div class="settings-page__content">
      <div class="settings-section">
        <h2 class="settings-section__title">Modifier mes identifiants</h2>
        <p class="settings-section__description">
          Changez votre nom d'utilisateur et votre mot de passe
        </p>

        <div class="success-area" *ngIf="successMessage">
          <p class="success-message">{{ successMessage }}</p>
        </div>

        <div class="error-area" *ngIf="errors().length > 0">
          <p *ngFor="let error of errors()">{{ error.control }}: {{ error.error }}</p>
          <p *ngIf="get('confirmPassword')?.hasError('passwordMismatch') && get('confirmPassword')?.touched">
            Les nouveaux mots de passe ne correspondent pas
          </p>
        </div>

        <form [formGroup]="formGroup" class="settings-form">
          <div class="settings-form__fields">
            <app-floating-label-input
              [label]="'Nom d\'utilisateur'"
              [control]="get('username')"
              [formGroup]="formGroup">
            </app-floating-label-input>

            <app-floating-label-input
              [label]="'Mot de passe actuel'"
              [control]="get('currentPassword')"
              [formGroup]="formGroup"
              type="password">
            </app-floating-label-input>

            <app-floating-label-input
              [label]="'Nouveau mot de passe'"
              [control]="get('newPassword')"
              [formGroup]="formGroup"
              type="password">
            </app-floating-label-input>

            <app-floating-label-input
              [label]="'Confirmer le nouveau mot de passe'"
              [control]="get('confirmPassword')"
              [formGroup]="formGroup"
              type="password">
            </app-floating-label-input>
          </div>

          <div class="settings-form__actions">
            <button 
              type="button" 
              class="btn-primary"
              (click)="updateCredentials()">
              Enregistrer les modifications
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
